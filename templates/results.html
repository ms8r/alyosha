$def with (result, query, source_list, back_link)

$var title: Foxes, not Hedgehogs - Results

$var cssfiles: static/styles.css

$code:
    # max. number of results to show per source:
    max_res = 3

$if result:
    <h1>...you may also want to look at some of these</h1>
    <p>Searched for:</p>
    <p><em>$query</em></p>
    <p>on</p>
    <p><em>$', '.join(source_list)</em></p>
    <p><a href="$back_link">&lt;&lt; Go back</a></p>
    $for source in result:
        <div=source-results>
        <h2>$source</h2>
        $code:
            num_source_res = len(result[source].res)
            if num_source_res < max_res:
                num_res = num_source_res
            else:
                num_res = max_res

        <p><em>Google reports $result[source].resnum hits, showing top $num_res</em></p>

        $for r in result[source].res[:num_res]:
            <h3><a href="$r['url']">$r['title']</a></h3>
            <h4>$r['link']</h4>
            <p>$r['desc']</p>

        </div>
    <p><a href="$back_link">&lt;&lt; Go back</a></p>
    
$else:
    <p>Nothing to show!</p> 
    <p><a href="$back_link">&lt;&lt; Go back</a></p>
